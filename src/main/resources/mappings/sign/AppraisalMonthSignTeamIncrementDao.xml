<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.boco.modules.fdoc.dao.sign.AppraisalMonthSignTeamIncrementDao">
	<sql id="Base_Column_List" >
		id, team_id, sign_increment, hyper_increment, diabetes_increment, phychosis_increment, old_increment, 
		maternal_increment, children_increment, family_increment, month, create_time
	</sql>
	
	<!-- 获取团队签约管理月度数据集合 -->
	<select id="getMonthSignTeamDataList" parameterType="string" resultType="com.boco.modules.fdoc.vo.AppraisalMonthSignTeamIncrementVo">
		SELECT
			b.doc_name doctorName,
			a.*,
			c.result_score, c.sign_hyper_score, c.sign_diabetes_score,
			c.sign_phychosis_score, c.sign_old_score, c.sign_maternal_score,
			c.sign_children_score, c.sign_manage_score, c.public_health_hyper_score,
			c.public_health_diabetes_score, c.public_health_phychosis_score, c.public_health_old_score,
			c.public_health_maternal_score, c.public_health_children_score, c.public_health_score,
			c.health_manage_edu_score, c.health_manage_daily_activity_score, c.health_manage_assessment_score,
			c.health_manage_document_score, c.health_manage_score, c.customer_score
		FROM
			t_appraisal_month_sign_team_increment a
		LEFT JOIN (
			SELECT
				team_id,
				doc_name
			FROM
				t_doctor
			WHERE
				leader_flag = 1
		) b ON a.team_id = b.team_id
		LEFT JOIN t_appraisal_month_team_score c ON a.team_id = c.team_id
		AND a.`month` = c.`month`
		WHERE
			a.`month` = #{0}
	</select>
</mapper>